{"version":3,"file":"main.js","mappings":"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","sources":["webpack://openui/webpack/bootstrap","webpack://openui/webpack/runtime/compat get default export","webpack://openui/webpack/runtime/define property getters","webpack://openui/webpack/runtime/global","webpack://openui/webpack/runtime/hasOwnProperty shorthand","webpack://openui/external \"express\"","webpack://openui/external \"cors\"","webpack://openui/external \"mongoose\"","webpack://openui/external \"@babel/runtime/helpers/defineProperty\"","webpack://openui/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://openui/external \"@babel/runtime/regenerator\"","webpack://openui/external \"@babel/runtime/helpers/classCallCheck\"","webpack://openui/external \"@babel/runtime/helpers/createClass\"","webpack://openui/external \"chalk\"","webpack://openui/./server/generators/console/log.js","webpack://openui/./server/generators/http/HttpResponse.js","webpack://openui/./server/generators/ws/WSResponse.js","webpack://openui/external \"@babel/runtime/helpers/typeof\"","webpack://openui/external \"@babel/runtime/helpers/slicedToArray\"","webpack://openui/./server/generators/schema/validation.js","webpack://openui/./server/crud/crud.ctrl.js","webpack://openui/./server/crud/crud.model.js","webpack://openui/./server/generators/schema/schemaType.js","webpack://openui/./server/db.js","webpack://openui/./server/crud/crud.router.js","webpack://openui/./server/generators/schema/schema.router.js","webpack://openui/external \"dotenv\"","webpack://openui/external \"express-ws\"","webpack://openui/./server/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"express\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"cors\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"mongoose\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/createClass\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"chalk\");","import chalk from 'chalk';\nconst logger = console.log;\n\nexport default {\n    error: (info, code = null) => logger(chalk.red.bold(`${code ? code : 'ERROR'}`, info)),\n    success: info => logger(chalk.green('[SUCCESS]',info)),\n    info: (data, type = '*') => logger(chalk.gray.bold(`${type}`, data)),\n    warning: info => logger(chalk.yellowBright.bold('[WARNING]', info)),\n    strong: info => logger(chalk.blueBright.bold('[*]', info))\n};","import log from \"../console/log\";\n\nexport default class HttpResponse {\n    constructor(res, route, method = 'GET') {\n        this.response = res;\n        this.route = route;\n        this.method = method;\n    }\n\n    /**\n     * Provide the appropriate response object after a request\n     * @param {number} status Response status code\n     * @param {string} message Response message text\n     * @param {object} data Response content object\n     */\n    json(status = 200, data = null, message = 'ok') {\n\n        if (status > 300) {\n            log.error(`[${this.method.toUpperCase()}] /${this.route} : ${message}`, status);\n        } else {\n            log.info(`[${this.method.toUpperCase()}] /${this.route} : Data sent with success`, status);\n        }\n\n        return this.response.status(status).json({\n            status,\n            message,\n            data\n        });\n    }\n}\n","import log from \"../console/log\";\n\nexport default class WSResponse {\n    /**\n     * @param {string} route Current route\n     * @param {string} method POST or DELETE\n     */\n    constructor(route, method) {\n        this.route = route;\n        this.method = method;\n    }\n\n    /**\n     * Provide the appropriate HTTP response object after a request\n     * @param {object} socket The client socket\n     * @param {number} status Response status code\n     * @param {string} message Response message text\n     * @param {object} data Response content object\n     */\n    json(socket, status = 200, data = null, message = 'ok') {\n\n        if (status > 300) {\n            log.error(`[WS:${this.method.toUpperCase()}] /${this.route} : ${message}`, status);\n        } else {\n            log.info(`[WS:${this.method.toUpperCase()}] /${this.route} : Data sent with success`, status);\n        }\n\n        return socket.send(JSON.stringify({\n            status,\n            message,\n            data\n        }));\n    }\n\n    /**\n     * Provide the appropriate WS response object after a request \n     * @param {object} wsInfo General app socket\n     * @param {number} status Response status code\n     * @param {string} message Response message text\n     * @param {object} data Response content object\n     */\n    static jsonBroadCast(wsInfo, status = 200, data = null, message = 'ok', route = '', method = 'GET') {\n        this.method = method;\n        wsInfo.clients.forEach(client => {\n            const response = new WSResponse(route, method);\n            response.json(client, status, data, message);\n        });\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/typeof\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/slicedToArray\");","import mongoose from 'mongoose';\nconst { Schema } = mongoose;\nvar validateEmail = function (email) {\n    var re = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    return re.test(email)\n};\n\n// default email schema\nlet defaultEmailSchema = {\n    type: String,\n    trim: true,\n    //lowercase: true,\n    //unique: true,\n    //required: true,\n    validate: [validateEmail, 'Please provide a valid email address'],\n    match: [/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/, 'Please fill a valid email address']\n}\n\n// default password schema\nlet defaultPasswordSchema = {\n    type: String,\n    match: /.{4,}/\n}\n\n// Mongoose default validations\nconst MONGOOSE_VALIDATIONS = {\n    \"STRING\": ['minlength', 'maxlength', 'match', 'enum', 'uppercase', 'lowercase', 'trim', 'required', 'validate', 'default'],\n    \"NUMBER\": ['min', 'max', 'enum', 'required', 'validate', 'default'],\n    \"DATE\": ['min', 'max', 'required', 'validate', 'default']\n}\n\n// get intersection of array\nconst arrIntersection = (arr1, arr2) => {\n    return arr1.filter(x => arr2.includes(x))\n}\n\n/**\n * \n * @param {object} ourSchema  like a mongo schema with \n * {File : input file, Text: input text, Number for input number }\n * @returns object that is mongoose schema\n */\nconst generateMongoSchema = (ourSchema) => {\n    let builtSchema = {}\n    for (const [key, value] of Object.entries(ourSchema)) {\n        if (value !== null && typeof value === 'object' && !Array.isArray(value)) {\n            builtSchema = { ...builtSchema, [key]: getSchemaFromObjectValue(value) }\n        } else if (Array.isArray(value)) {\n            builtSchema = { ...builtSchema, [key]: value }\n        } else {\n            builtSchema = { ...builtSchema, [key]: getDefaultSchema(value) }\n        }\n    }\n    return new Schema(builtSchema)\n}\n\n\nfunction getSchemaFromObjectValue(value) {\n    const type = value['type']\n    let fieldSchema = {}\n    if (type === 'Email' || type === 'Text' || type === String || type === Boolean)\n        fieldSchema = { ...value, ...getDefaultSchema(type) }\n    if (type === 'Password' || type === 'File' || type === Date) {\n        const typeUpperCase = type === Date ? 'DATE' : 'STRING';\n        fieldSchema = getDefaultSchema(type)\n        fieldSchema = { ...fieldSchema, ...foundedMongoValidation(value, typeUpperCase) }\n    }\n    if (type === mongoose.Types.ObjectId)\n        fieldSchema = { ...value }\n\n    return fieldSchema\n}\n\nfunction foundedMongoValidation(obj, type) {\n    let schema = {}\n    let validations = Object.keys(obj)\n    let foundedValidations = arrIntersection(validations, MONGOOSE_VALIDATIONS[type])\n    foundedValidations.forEach((val) => {\n        schema[val] = obj[val]\n    })\n    return schema\n}\n\nfunction getDefaultSchema(type) {\n    let defaultSchema = {}\n    switch (type) {\n        case 'Text':\n            defaultSchema = { type: String };\n            break;\n        case 'Email':\n            defaultSchema = defaultEmailSchema;\n            break;\n        case 'Password':\n            defaultSchema = defaultPasswordSchema\n            break;\n        case 'File':\n            defaultSchema = { type: String }\n            break;\n        case Number:\n            defaultSchema = { type: Number }\n            break;\n        case Date:\n            defaultSchema = { type: Date }\n            break;\n        case Boolean:\n            defaultSchema = { type: Boolean }\n            break;\n        case String:\n            defaultSchema = { type: String }\n            break;\n    }\n\n    return defaultSchema;\n}\n\nexport default generateMongoSchema;","import express from 'express';\nimport HttpResponse from '../generators/http/HttpResponse';\nimport WSResponse from '../generators/ws/WSResponse';\nimport createModel from './crud.model';\n\nfunction crudCtrl(route, wsInfo) {\n    const router = express.Router();\n    const model = createModel(route);\n\n    // Broadcast json response by ws\n    const wsJsonBroadCast = (method = 'get', status = 200, data = null, message = 'ok') => {\n        WSResponse.jsonBroadCast(wsInfo, status, data, message, route.name, method);\n    }\n\n    // ===== HTTP HANDLING =====\n    router.get('/', async (req, res) => {\n        const httpResponse = new HttpResponse(res, route.name);\n        try {\n            const data = await model.find({ ...req.query });\n            httpResponse.json(200, data);\n        } catch (e) {\n            httpResponse.json(500, null, 'Unable to read data');\n        }\n    });\n\n    router.get('/:id', async (req, res) => {\n        const httpResponse = new HttpResponse(res, route.name + '/' + req.params.id);\n        try {\n            const data = await model.findById(req.params.id)\n            if (!data) {\n                httpResponse.json(404, null, 'Resource not found.')\n            } else {\n                httpResponse.json(200, data);\n            }\n        } catch (e) {\n            httpResponse.json(500, null, e.message);\n        }\n    });\n\n    router.post('/', async (req, res) => {\n        const httpResponse = new HttpResponse(res, route.name + '/' + req.params.id);\n        try {\n            const newData = new model({ ...req.body });\n            console.log(req.body, newData);\n            await newData.save();\n            httpResponse.json(201, newData, 'Item created!');\n        } catch (e) {\n            httpResponse.json(201, null, e.message);\n        }\n    });\n\n    router.put('/:id', async (req, res) => {\n        delete req.body._id;\n        try {\n            await model.updateOne({ _id: req.params.id }, { ...req.body })\n            res.status(200).json({ message: 'Item Updated!' });\n        } catch (e) {\n            res.status(422).json(e)\n        }\n    });\n\n    router.delete('/:id', async (req, res) => {\n        try {\n            await model.deleteOne({ _id: req.params.id })\n            res.status(200).json({ message: 'Item deleted!' });\n        } catch (e) {\n            res.status(422).json(e)\n        }\n    });\n    // ===== END HTTP HANDLING =====\n\n\n    // ===== Web Socket HANDLING =====\n    router.ws('/post', (ws, req) => {\n        ws.on('message', async msg => {\n            try {\n                const newData = new model(JSON.parse(msg));\n                await newData.save();\n                console.log(newData);\n                wsJsonBroadCast('post', 200, {\n                    route: route.name,\n                    posted: newData\n                });\n            } catch (e) {\n                wsJsonBroadCast('post', 500, null, e.message)\n            }\n        });\n    });\n\n    router.ws('/put', (ws, req) => {\n        ws.on('message', async msg => {\n            try {\n                const value = JSON.parse(msg);\n                const id = value.id;\n                delete value.id;\n                const updated = await model.updateOne({ _id: id }, value);\n                wsJsonBroadCast('put', 200, {\n                    route: route.name,\n                    updated\n                });\n            } catch (e) {\n                wsJsonBroadCast('put', 422, null, e.message);\n            }\n        });\n    });\n\n    router.ws('/delete', (ws, req) => {\n        ws.on('message', async (msg) => {\n            try {\n                await model.deleteOne({ _id: JSON.parse(msg).id });\n                wsJsonBroadCast('delete', 200, {\n                    route: route.name,\n                    deletedId: JSON.parse(msg).id\n                });\n            } catch (e) {\n                wsJsonBroadCast('delete', 422, null, e.message);\n            }\n        });\n    });\n    // ===== END WS HANDLING====\n\n    return router;\n}\nexport default crudCtrl;","import mongoose from 'mongoose'\nimport generateMongoSchema from '../generators/schema/validation';\n\nexport default function createModel(route) {\n    return mongoose.model(route.name, generateMongoSchema(route.schema))\n}","import mongoose from 'mongoose';\n\nglobal.Text = 'Text'; // Store String that correspond to mongo String dataType\nglobal.Email = 'Email'; // Store email \nglobal.Password = 'Password'; // Store password \nglobal.File = 'File'; // Store file but it uploadUrl in mongo db,\nglobal.Date = Date;\nglobal.Number = Number;\nglobal.Boolean = Boolean;\nglobal.ObjectId = mongoose.Types.ObjectId;\n\nexport default {}; ","import './generators/schema/schemaType';\n\nexport default {\n    users: {\n        email: Email,\n        password: Password,\n        name: {\n            required: true,\n            type: Text\n        }\n    },\n    posts: {\n        author: {\n            type: ObjectId,\n            ref: 'users'\n        },\n        message: Text,\n        at: Date,\n        likes: Number\n    }\n};","import crudCtrl from \"./crud.ctrl\";\nimport db from \"../db\";\n\nconst dbValues = Object.entries(db);\n\nconst routes = dbValues.map(it => ({ name: it[0], schema: it[1] }));\n\nfunction createCrudRouter(app, wsInfo) {\n    for (const r of routes) {\n        app.use('/api/' + r.name, crudCtrl(r, wsInfo))\n    }\n    \n}\n\nexport default createCrudRouter;","import express from 'express';\nimport db from '../../db';\nimport HttpResponse from '../http/HttpResponse';\nimport mongoose from 'mongoose';\n\nfunction stringifyAttribute(schema) {\n    const newSchema = {};\n    const _TYPES_ = {\n        'Date': Date,\n        'Number': Number,\n        'Boolean': Boolean,\n        'ObjectId': mongoose.Types.ObjectId,\n    };\n    for (const attr in schema) {\n        let founded = false;\n        for (const subAttr in _TYPES_) {\n            if (schema[attr] === _TYPES_[subAttr]) {\n                newSchema[attr] = subAttr;\n                founded = true;\n                break;\n            } else {\n                if (schema[attr].type && schema[attr].type === _TYPES_[subAttr]) {\n                    newSchema[attr] = { ...schema[attr], type: subAttr };\n                    founded = true;\n                    break;\n                }\n            }\n        }\n        if (!founded) {\n            newSchema[attr] = schema[attr];\n        }\n    }\n    return newSchema;\n}\n\nfunction stringifySchema(schema) {\n    const newSchema = {};\n    for (const attr in schema) {\n        newSchema[attr] = stringifyAttribute(schema[attr]);\n    }\n    return newSchema;\n}\n\n\nfunction createSchemaRouter(app) {\n    const router = express.Router();\n\n    router.get('/', (req, res) => {\n        const httpResponse = new HttpResponse(res, 'schema');\n        httpResponse.json(200, stringifySchema(db));\n    });\n\n    router.get('/:name', (req, res) => {\n        const name = req.params.name;\n        const httpResponse = new HttpResponse(res, 'schema/' + name);\n        if (!(name in db)) {\n            httpResponse.json(404, null, 'The collection name provided does not exists');\n        } else {\n            httpResponse.json(200, db[name]);\n        }\n    });\n\n    app.use('/api/schema', router);\n}\n\nexport default createSchemaRouter;","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"dotenv\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"express-ws\");","import express from 'express';\nimport cors from 'cors';\nimport mongoose from 'mongoose';\nimport createCrudRouter from './crud/crud.router';\nimport log from './generators/console/log';\nimport createSchemaRouter from './generators/schema/schema.router';\nimport dotenv from 'dotenv';\nimport expressWs from 'express-ws';\n\ndotenv.config();\n\nconst app = express();\nconst wsInfo = expressWs(app).getWss();\napp.use(cors());\napp.use(express.json());\n\nmongoose.connect(process.env.MONGO_URI, {\n\tuseNewUrlParser: true,\n\tuseUnifiedTopology: true,\n\tuseFindAndModify: false,\n\tuseCreateIndex: true\n}).catch((err) => log.error('Unable to connect to Mongo database'));\n\ncreateCrudRouter(app, wsInfo);\ncreateSchemaRouter(app);\n\nconst PORT = process.env.PORT || 4300\napp.listen(PORT, _ => log.success('Server is started'))"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","call","require","logger","console","log","info","code","chalk","data","type","HttpResponse","res","route","method","response","status","message","toUpperCase","json","WSResponse","socket","send","JSON","stringify","wsInfo","clients","forEach","client","Schema","mongoose","defaultEmailSchema","String","trim","validate","email","test","match","defaultPasswordSchema","MONGOOSE_VALIDATIONS","getSchemaFromObjectValue","value","fieldSchema","Boolean","getDefaultSchema","Date","typeUpperCase","arr1","arr2","schema","validations","keys","filter","x","includes","val","foundedMongoValidation","defaultSchema","Number","router","express","model","name","ourSchema","builtSchema","entries","Array","isArray","generateMongoSchema","createModel","wsJsonBroadCast","jsonBroadCast","req","httpResponse","find","query","params","id","findById","post","newData","body","save","put","_id","updateOne","deleteOne","ws","on","msg","parse","posted","updated","deletedId","global","Text","Email","Password","File","ObjectId","users","password","required","posts","author","ref","at","likes","routes","db","map","it","stringifyAttribute","newSchema","_TYPES_","attr","founded","subAttr","dotenv","app","expressWs","getWss","use","cors","process","env","MONGO_URI","useNewUrlParser","useUnifiedTopology","useFindAndModify","useCreateIndex","err","r","crudCtrl","createCrudRouter","stringifySchema","createSchemaRouter","PORT","listen","_"],"sourceRoot":""}